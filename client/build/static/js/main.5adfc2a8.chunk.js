(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{107:function(e,t){},136:function(e,t){},139:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(26),l=a.n(s),o=(a(42),a(82),a(12)),c=a(4),i=a(5),u=a(7),m=a(6),h=a(8),d=(a(83),a(21)),p=a(11),f=a(3),g=a.n(f),E=function(e,t,a,n,r,s){return g.a.post("/api/auth/signup",{username:e,street:t,houseNumber:a,city:n,postalCode:r,password:s}).then((function(e){return console.log(e.data),e.data})).catch((function(e){return e.response.data}))},v=function(e,t){return g.a.post("/api/auth/login",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},b=a(144),C=a(141),y=function(e){console.log("nav",e);return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light nav-menu"},r.a.createElement(p.b,{className:"navbar-brand",to:"/"},r.a.createElement("button",{id:"logo-button",onClick:function(){return e.handleChangeNav({showNewsfeed:!0,showMyEvents:!1,showEventsGoing:!1,showNextEvents:!1})}},"KieZ")),e.user?r.a.createElement("div",{className:"searchRow"},r.a.createElement(b.a,{className:"input-group btn-group",onSubmit:function(t){return e.handleQuery(t,e.history)}},r.a.createElement("select",{className:"custom-select",name:"selectInputfield",onChange:e.handleChange,value:e.selectInputfield},r.a.createElement("option",{value:""},"Select Option"),r.a.createElement("option",{value:"Neighbors"},"Find by Username"),r.a.createElement("option",{value:"Help"},"Find by items")),r.a.createElement("input",{type:"text",className:"form-control",name:"searchInputfield",placeholder:"Find your Neighbors here",onChange:e.handleChange,value:e.searchInputfield}),r.a.createElement("div",{className:"btn-group"},r.a.createElement(C.a,{variant:"outline-secondary",type:"submit"},"Search")))):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",null,e.user?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.b,{className:"btn btn-outline-success",to:"/".concat(e.user.username)},e.user.username),r.a.createElement(p.b,{className:"btn btn-outline-info mx-3",to:"/events/create"},"Create Event"),r.a.createElement(p.b,{to:"/",onClick:function(){g.a.delete("/api/auth/logout"),e.clearUser(null)},className:"btn btn-outline-danger"},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(p.b,{className:"btn btn-outline-info mr-3",to:"/signup"},"Signup"),r.a.createElement(p.b,{className:"btn btn-outline-info",to:"/login"},"Login"))))},N=a(14),w=a(142),S=a(143),O=a(70),F=function(e){return r.a.createElement(w.a,{className:"event-details"},r.a.createElement(S.a,null,r.a.createElement(O.a,null,r.a.createElement("img",{src:e.event.imageUrl,width:"80%",alt:e.event.name})),r.a.createElement(O.a,{sm:6,className:"event-info-container"},r.a.createElement(p.b,{to:"/events/".concat(e.event._id),key:e.event._id,className:"event-overview-text"},r.a.createElement("h2",null,e.event.name),r.a.createElement("div",{className:"date"},r.a.createElement("h5",null,e.event.date.slice(0,10)," at ",e.event.time),r.a.createElement("h5",null,e.event.address.formattedAddress)),e.event.join.length+1>1?r.a.createElement("h5",null," ","\u2022 ".concat(e.event.join.length+1," people are going \u2022")):r.a.createElement("div",null)))))},j=function(e){console.log("USER:",e.user._id);var t=r.a.createElement("div",null,r.a.createElement("h1",null,"My Events: "),e.state.allEvents.filter((function(t){return t.creater._id===e.user._id&&new Date(t.date)>new Date&&"event"===t.type})).sort((function(e,t){return new Date(e.date)-new Date(t.date)})).map((function(e){return r.a.createElement(F,{event:e})}))),a=r.a.createElement("div",null,r.a.createElement("h1",null,"Past Events: "),e.state.allEvents.filter((function(t){return t.creater._id===e.state.user._id&&new Date(t.date)<new Date&&"event"===t.type})).sort((function(e,t){return new Date(t.date)-new Date(e.date)})).map((function(e){return r.a.createElement(F,{event:e})})));return r.a.createElement("div",null,r.a.createElement("div",null,t," ",a))},A=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={description:""},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state.description;g.a.post("/api/events",{description:t,type:"post",date:new Date,creater:a.props.user._id,street:a.props.user.address.street,houseNumber:a.props.user.address.houseNumber,city:a.props.user.address.city,postalCode:a.props.user.address.postalCode,imageUrl:a.props.user.imageUrl}).then((function(e){return console.log("RESPONSE POST:",e)})).then(a.props.getAllEvents).then(a.setState({description:""})).catch((function(e){console.log(e)}))},a.handleChange=function(e){var t=e.target.value;a.setState({description:t})},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"post-form"},r.a.createElement(b.a,null,r.a.createElement(b.a,{onSubmit:this.handleFormSubmit},r.a.createElement(b.a.Group,null,r.a.createElement(b.a.Control,{type:"text",as:"textarea",rows:"3",name:"description",onChange:this.handleChange,value:this.state.description,placeholder:"What do you want to tell to your neighbors?"})),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement(C.a,{type:"submit"},"Post"))))))}}]),t}(n.Component),U=function(e,t){var a=71.5*(e.lng-t.lng),n=111.3*(e.lat-t.lat);return Math.sqrt(a*a+n*n).toFixed(1)},I=function(e){var t=r.a.createElement(r.a.Fragment,null,e.allEvents.filter((function(t){return"post"===t.type&&U(t.address.coordinates,e.user.address.coordinates)<3})).sort((function(e,t){return new Date(t.date)-new Date(e.date)})).map((function(t){var a=new Date(t.date),n=a.getDate(),s={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"}[a.getMonth()];return console.log("CREATER Username?: ",t.creater.username),r.a.createElement("div",{key:t._id,className:"post"},r.a.createElement("div",null,r.a.createElement(p.b,{to:"/".concat(t.creater.username),className:"text-decoration-none"},r.a.createElement("img",{src:t.imageUrl,className:"user-pic",width:"5%",alt:t.username}),r.a.createElement("span",{className:"username"}," ".concat(t.creater.username))),r.a.createElement("span",{className:"date"},"   ".concat(n,". ").concat(s," ")),t.creater.username===e.user.username?r.a.createElement("button",{className:"bin",widht:"20%",onClick:function(){return a=t._id,void g.a.delete("/api/events/".concat(a)).then((function(t){e.getAllEvents()})).catch((function(e){console.log(e)}));var a}},r.a.createElement("i",{class:"fas fa-trash-alt"})):r.a.createElement("div",null)),r.a.createElement("p",null,t.description.trim().split("\n").map((function(e,t){return r.a.createElement("span",{key:t},e,r.a.createElement("br",null))}))))})));return r.a.createElement("div",null,t)},x=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{user:this.props.user,getAllEvents:this.props.getAllEvents}),r.a.createElement(I,{getAllEvents:this.props.getAllEvents,allEvents:this.props.allEvents,user:this.props.user}))}}]),t}(n.Component),k=function(e){console.log("ALL EVENTS:",e.allEvents[0]);var t=r.a.createElement("div",null,r.a.createElement("h1",null,"Events I\xb4m going:"),e.allEvents.filter((function(t){return t.join.includes(e.user._id)&&"event"===t.type})).sort((function(e,t){return new Date(e.date)-new Date(t.date)})).map((function(e){return r.a.createElement(F,{event:e})})));return r.a.createElement("div",null,t)},M=function(e){var t=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("h1",null,"Next events in your neighborhood"),e.state.allEvents.filter((function(t){return U(e.user.address.coordinates,t.address.coordinates)<3&&new Date(t.date)>new Date&&"event"===t.type})).sort((function(e,t){return new Date(e.date)-new Date(t.date)})).map((function(e){return r.a.createElement(F,{event:e})}))));return r.a.createElement("div",null,t)},D=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;console.log("test",this.props.chatMsg);var t="",a="";if(this.props.chatMsg.length){var n=(t=Object(N.a)(this.props.chatMsg).filter((function(t){return t.sender._id===e.props.user._id||t.reciever._id===e.props.user._id})))&&t[t.length-1];n&&(console.log(n),a=n.sender._id!==this.props.user._id?n.sender._id:n.reciever._id)}return console.log("Home",t),console.log(this.props.user),r.a.createElement(w.a,{id:"home"},r.a.createElement(S.a,null,r.a.createElement(O.a,{md:3,sm:5,className:"home-navbar"},r.a.createElement("img",{src:"".concat(this.props.user.imageUrl),alt:"".concat(this.props.user.username),width:"60%",className:"user-pic home-side-nav"}),r.a.createElement("div",{sm:5},r.a.createElement("div",null,t.length>0&&r.a.createElement(p.b,{to:"/messenger/".concat(a),className:"btn btn-light home-side-nav",id:"home-nav-button4"},r.a.createElement("i",{className:"fas fa-envelope"})," Messenger")),r.a.createElement("div",null,r.a.createElement(C.a,{className:"home-side-nav",id:"home-nav-button1",variant:"light",onClick:function(){e.props.handleChangeNav({showNewsfeed:!1,showMyEvents:!0,showEventsGoing:!1,showNextEvents:!1})}},"My events")),r.a.createElement("div",null,r.a.createElement(C.a,{className:"home-side-nav",id:"home-nav-button2",variant:"light",onClick:function(){return e.props.handleChangeNav({showNewsfeed:!1,showMyEvents:!1,showEventsGoing:!0,showNextEvents:!1})}},"Events I\xb4m going")),r.a.createElement("div",null,r.a.createElement(C.a,{className:"home-side-nav",id:"home-nav-button3",variant:"light",onClick:function(){e.props.handleChangeNav({showNewsfeed:!1,showMyEvents:!1,showEventsGoing:!1,showNextEvents:!0})}},"Next events")))),r.a.createElement(O.a,{md:9},this.props.showNewsfeed&&r.a.createElement(x,{user:this.props.user,allEvents:this.props.allEvents,getAllEvents:this.props.getAllEvents}),this.props.showMyEvents&&r.a.createElement(j,{state:this.props.state,user:this.props.user}),this.props.showEventsGoing&&r.a.createElement(k,{user:this.props.user,allEvents:this.props.allEvents}),this.props.showNextEvents&&r.a.createElement(M,{state:this.props.state,user:this.props.user}))))}}]),t}(n.Component),_=function(e){return g.a.post("/api/upload",e).then((function(e){return e.data})).catch((function(e){return e.response.data}))},R=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("img",{src:this.props.imageUrl,alt:"",width:"300"}),r.a.createElement("input",{type:"file",onChange:this.props.handleFileUpload}))}}]),t}(n.Component),G=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={type:"event",name:"",street:"",houseNumber:"",city:"",postalCode:"",date:"",time:"",description:"",imageUrl:"https://res.cloudinary.com/dqrjpg3xc/image/upload/v1575651991/kiez/default-event-img.jpg.jpg"},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.name,r=t.street,s=t.houseNumber,l=t.city,o=t.postalCode,c=t.date,i=t.time,u=t.imageUrl,m=t.description;g.a.post("/api/events",{type:"event",name:n,street:r,houseNumber:s,city:l,postalCode:o,date:c,time:i,imageUrl:u,description:m}).then((function(e){console.log("ADD EVENT DATA Back-End:",e.data),a.props.history.push("/events/".concat(e.data._id))})).then(a.props.getAllEvents).catch((function(e){console.log(e)}))},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(o.a)({},n,r))},a.handleFileUpload=function(e){console.log("The file to be uploaded is: ",e.target.files[0]);var t=new FormData;t.append("imageUrl",e.target.files[0]),a.setState({uploadOn:!0}),_(t).then((function(e){a.setState({imageUrl:e.secure_url,uploadOn:!1},(function(){return console.log("response",e)}))})).catch((function(e){console.log("Error while uploading the file: ",e)}))},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(w.a,{className:"container event-form-container"},r.a.createElement("h1",null,"Create an event for your neighborhood"),r.a.createElement(S.a,null,r.a.createElement(O.a,{md:4},r.a.createElement(R,{imageUrl:this.state.imageUrl,handleFileUpload:this.handleFileUpload})),r.a.createElement(O.a,{md:8},r.a.createElement(b.a,{onSubmit:this.handleFormSubmit,className:"row m-5"},r.a.createElement(b.a.Group,{className:"col-12"},r.a.createElement(b.a.Label,{htmlFor:"name"},"Name: "),r.a.createElement(b.a.Control,{type:"text",name:"name",id:"name",onChange:this.handleChange,value:this.state.name,required:!0})),r.a.createElement(b.a.Group,{className:"col-8"},r.a.createElement(b.a.Label,{htmlFor:"street"},"Street: "),r.a.createElement(b.a.Control,{type:"text",name:"street",id:"street",onChange:this.handleChange,value:this.state.street})),r.a.createElement(b.a.Group,{className:"col-4"},r.a.createElement(b.a.Label,{htmlFor:"houseNumber"},"Nr.: "),r.a.createElement(b.a.Control,{type:"text",name:"houseNumber",id:"houseNumber",onChange:this.handleChange,value:this.state.houseNumber})),r.a.createElement(b.a.Group,{className:"col-8"},r.a.createElement(b.a.Label,{htmlFor:"city"},"City: "),r.a.createElement(b.a.Control,{type:"text",name:"city",id:"city",onChange:this.handleChange,value:this.state.city})),r.a.createElement(b.a.Group,{className:"col-4"},r.a.createElement(b.a.Label,{htmlFor:"postalCode"},"Postalcode: "),r.a.createElement(b.a.Control,{type:"text",name:"postalCode",id:"postalCode",onChange:this.handleChange,value:this.state.postalCode})),r.a.createElement(b.a.Group,{className:"col-6"},r.a.createElement(b.a.Label,{htmlFor:"date"},"Date: "),r.a.createElement(b.a.Control,{type:"date",name:"date",id:"date",onChange:this.handleChange,value:this.state.date})),r.a.createElement(b.a.Group,{className:"col-6"},r.a.createElement(b.a.Label,{htmlFor:"time"},"Time: "),r.a.createElement(b.a.Control,{type:"time",name:"time",id:"time",onChange:this.handleChange,value:this.state.time})),r.a.createElement(b.a.Group,{className:"col-12"},r.a.createElement(b.a.Label,{htmlFor:"description"},"Description: "),r.a.createElement(b.a.Control,{type:"text",as:"textarea",rows:"3",name:"description",id:"description",onChange:this.handleChange,value:this.state.description})),r.a.createElement(C.a,{className:"col-12",type:"submit"},"Create an Event")))))}}]),t}(n.Component),L=(a(106),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={userJoins:null},a.handleClick=function(){a.setState({userJoins:!a.state.userJoins},(function(){g.a.put("/api/events/eventUpdate",{event:a.props.event,userJoins:a.state.userJoins}).then((function(){console.log("Alles coool"),a.props.getSingleEvent(),a.props.getAllEvents()}))}))},a.componentDidMount=function(){a.props.joinedUsers.filter((function(e){return e._id===a.props.user._id})).length?a.setState({userJoins:!0}):a.setState({userJoins:!1})},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=!1;return this.props.event.creater._id===this.props.user._id&&(e=!0),console.log("USER ID LOOK HERE",this.props.user._id),console.log("PROPS IN GUESTLIST:",this.props),console.log("host-image",this.props.event.creater),r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,null,r.a.createElement("h4",null,"Host: ","    ",r.a.createElement(p.b,{to:"/".concat(this.props.event.creater.username),className:"text-decoration-none"},r.a.createElement("img",{className:"user-pic",width:"10%",src:this.props.event.creater.imageUrl,alt:this.props.event.creater.username})," ",r.a.createElement("span",{className:"username"},this.props.event.creater.username," "))),!e&&r.a.createElement(C.a,{variant:"light",onClick:this.handleClick,id:"".concat(this.state.userJoins?"joined-button":"join-button")},this.state.userJoins?r.a.createElement("i",{className:"fas fa-user-friends"}):r.a.createElement("i",{className:"fas fa-user-alt"})," ",this.state.userJoins?"Joined":"Join"),r.a.createElement(S.a,null,this.props.joinedUsers.map((function(e){return r.a.createElement(O.a,{xs:2,className:"guest",key:e._id},r.a.createElement(p.b,{to:"/".concat(e.username),className:"text-decoration-none"},r.a.createElement("img",{className:"user-pic",width:"90%",src:e.imageUrl,alt:e.username})," ",r.a.createElement("p",{className:"username"},e.username)))})))))}}]),t}(n.Component)),T=function(e){var t=r.a.createElement(r.a.Fragment,null,e.event.comments.sort((function(e,t){return new Date(e.date)-new Date(t.date)})).map((function(t){return r.a.createElement("div",{key:t._id,className:"comment-box"},r.a.createElement("div",null,r.a.createElement(p.b,{to:"/".concat(t.author.username),className:"text-decoration-none"},r.a.createElement("img",{src:t.author.imageUrl,className:"user-pic",width:"7%",alt:t.author.username})," ",r.a.createElement("span",{className:"username"},t.author.username)),t.author.username===e.user.username?r.a.createElement("button",{className:"bin",widht:"20%",onClick:function(){return a=t._id,void g.a.put("/api/comments/".concat(e.event._id),{commentId:a}).then((function(){e.getSingleEvent(),e.getAllEvents()}));var a}},r.a.createElement("i",{class:"fas fa-trash-alt"})):r.a.createElement("div",null)),r.a.createElement("p",null,t.content.trim().split("\n").map((function(e,t){return r.a.createElement("span",{key:t},e,r.a.createElement("br",null))}))))})));return e.event?r.a.createElement("div",null,t):r.a.createElement("div",null)},P=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={content:""},a.handleChange=function(e){var t=e.target.value;a.setState({content:t})},a.handleFormSubmit=function(e){console.log("event id:",a.props.eventId),e.preventDefault();var t=a.state.content;g.a.post("/api/comments/".concat(a.props.eventId),{content:t,date:new Date,author:a.props.user._id}).then((function(e){return console.log("RESPONSE POST:",e)})).then(a.props.getAllEvents).then(a.setState({content:""})).then((function(){a.props.getSingleEvent(),a.props.getAllEvents()})).catch((function(e){console.log(e)}))},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(b.a,{onSubmit:this.handleFormSubmit},r.a.createElement(b.a.Group,null,r.a.createElement(b.a.Control,{type:"text",as:"textarea",rows:"3",name:"content",onChange:this.handleChange,value:this.state.content,placeholder:"write a comment or question"})),r.a.createElement(C.a,{type:"submit"},"Send")))}}]),t}(n.Component),J=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(T,{user:this.props.user,event:this.props.event,getSingleEvent:this.props.getSingleEvent,getAllEvents:this.props.getAllEvents}),r.a.createElement(P,{user:this.props.user,eventId:this.props.eventId,getSingleEvent:this.props.getSingleEvent,getAllEvents:this.props.getAllEvents}))}}]),t}(n.Component),q=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={editForm:!1,event:{},name:"",address:null,imageUrl:"",street:"",houseNumber:"",city:"",postalCode:"",date:"",time:"",description:""},a.getSingleEvent=function(){console.log("id in eventdetails",a.props.match.params.id);var e=a.props.match.params;g.a.get("/api/events/".concat(e.id)).then((function(e){console.log("responseFromApi",e),a.setState({event:e.data,name:e.data.name,address:e.data.address,street:e.data.address.street,houseNumber:e.data.address.houseNumber,city:e.data.address.city,postalCode:e.data.address.postalCode,date:e.data.date,time:e.data.time,imageUrl:e.data.imageUrl,description:e.data.description})})).catch((function(e){console.log(e)}))},a.deleteEvent=function(){var e=a.state.event._id;g.a.delete("/api/events/".concat(e)).then((function(e){console.log(a.props.history),a.props.history.push("/events/myevents")})).then(a.props.getAllEvents).catch((function(e){console.log(e)}))},a.toggleEdit=function(){a.setState({editForm:!a.state.editForm})},a.handleChange=function(e){a.setState(Object(o.a)({},e.target.name,e.target.value))},a.handleFileUpload=function(e){console.log("The file to be uploaded is: ",e.target.files[0]);var t=new FormData;t.append("imageUrl",e.target.files[0]),a.setState({uploadOn:!0}),_(t).then((function(e){a.setState({imageUrl:e.secure_url,uploadOn:!1},(function(){return console.log("response",e)}))})).catch((function(e){console.log("Error while uploading the file: ",e)}))},a.handleFormSubmit=function(e){e.preventDefault();var t=a.props.match.params.id,n=a.state,r=n.name,s=n.street,l=n.houseNumber,o=n.city,c=n.postalCode,i=n.date,u=n.time,m=n.imageUrl,h=n.description;g.a.put("/api/events/".concat(t),{name:r,street:s,houseNumber:l,city:o,postalCode:c,imageUrl:m,date:i,time:u,description:h}).then((function(e){var t=e.data,n=t.name,r=t.address,s=t.imageUrl,l=t.date,o=t.time,c=t.description;a.setState({editForm:!1,event:e.data,name:n,address:r,imageUrl:s,date:l,time:o,description:c},(function(){console.log("STATE:",a.state),a.getSingleEvent()})),console.log("RESPONSE AFTER CHANGE: ",e)})).catch((function(e){console.log(e)}))},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getSingleEvent()}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){console.log("IN EVENTDETAILS ALL USERS:",this.props.allUsers);var e=!1,t=this.state.description;return this.state.date?this.state.event?(this.state.event.creater._id===this.props.state.user._id&&(e=!0),!1===this.state.editForm?r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{className:"event-details"},e&&r.a.createElement("div",{className:"d-flex justify-content-end mb-5"},r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{variant:"outline-info",className:"mx-2",onClick:this.toggleEdit},"\u270e"," Edit event"))),r.a.createElement(S.a,null,r.a.createElement(O.a,null,r.a.createElement("img",{src:this.state.imageUrl,width:"80%",alt:this.state.name})),r.a.createElement(O.a,{sm:6,className:"event-info-container"},r.a.createElement("h1",null,this.state.name),r.a.createElement("h5",{className:"date"},this.state.date.slice(0,10)," at ",this.state.time),r.a.createElement("h5",{className:"date"},this.state.address.formattedAddress),r.a.createElement("p",null,t.trim().split("\n").map((function(e,t){return r.a.createElement("span",{key:t},e,r.a.createElement("br",null))})))))),r.a.createElement(w.a,null,r.a.createElement(S.a,null,r.a.createElement(O.a,null,r.a.createElement(L,{event:this.state.event,joinedUsers:this.state.event.join,user:this.props.user,allUsers:this.props.allUsers,getSingleEvent:this.getSingleEvent,getAllEvents:this.props.getAllEvents})),r.a.createElement(O.a,null,r.a.createElement(J,{user:this.props.user,eventId:this.props.match.params.id,event:this.state.event,getSingleEvent:this.getSingleEvent,getAllEvents:this.props.getAllEvents}))))):!0===this.state.editForm?r.a.createElement(w.a,{className:"container event-form-container"},r.a.createElement("h1",null,"Edit event"),r.a.createElement(S.a,null,r.a.createElement(O.a,{md:4},r.a.createElement(R,{imageUrl:this.state.imageUrl,handleFileUpload:this.handleFileUpload})),r.a.createElement(O.a,{md:8},r.a.createElement(b.a,{onSubmit:this.handleFormSubmit,className:"row m-5"},r.a.createElement(b.a.Group,{className:"col-12"},r.a.createElement(b.a.Label,{htmlFor:"name"},"Name: "),r.a.createElement(b.a.Control,{type:"text",name:"name",id:"name",onChange:this.handleChange,value:this.state.name,required:!0})),r.a.createElement(b.a.Group,{className:"col-8"},r.a.createElement(b.a.Label,{htmlFor:"street"},"Street: "),r.a.createElement(b.a.Control,{type:"text",name:"street",id:"street",onChange:this.handleChange,value:this.state.street,required:!0})),r.a.createElement(b.a.Group,{className:"col-4"},r.a.createElement(b.a.Label,{htmlFor:"houseNumber"},"Nr.: "),r.a.createElement(b.a.Control,{type:"text",name:"houseNumber",id:"houseNumber",onChange:this.handleChange,value:this.state.houseNumber,required:!0})),r.a.createElement(b.a.Group,{className:"col-8"},r.a.createElement(b.a.Label,{htmlFor:"city"},"City: "),r.a.createElement(b.a.Control,{type:"text",name:"city",id:"city",onChange:this.handleChange,value:this.state.city,required:!0})),r.a.createElement(b.a.Group,{className:"col-4"},r.a.createElement(b.a.Label,{htmlFor:"postalCode"},"Postalcode: "),r.a.createElement(b.a.Control,{type:"text",name:"postalCode",id:"postalCode",onChange:this.handleChange,value:this.state.postalCode,required:!0})),r.a.createElement(b.a.Group,{className:"col-6"},r.a.createElement(b.a.Label,{htmlFor:"date"},"Date: "),r.a.createElement(b.a.Control,{type:"date",name:"date",id:"date",onChange:this.handleChange,value:this.state.date,required:!0})),r.a.createElement(b.a.Group,{className:"col-6"},r.a.createElement(b.a.Label,{htmlFor:"time"},"Time: "),r.a.createElement(b.a.Control,{type:"time",name:"time",id:"time",onChange:this.handleChange,required:!0})),r.a.createElement(b.a.Group,{className:"col-12"},r.a.createElement(b.a.Label,{htmlFor:"description"},"Description: "),r.a.createElement(b.a.Control,{type:"text",as:"textarea",rows:"3",name:"description",id:"description",onChange:this.handleChange,value:this.state.description})),r.a.createElement(C.a,{className:"col-12",type:"submit"},"Save changes"))))):void 0):r.a.createElement("div",null):r.a.createElement(r.a.Fragment,null)}}]),t}(n.Component),H=function(e){console.log("search resilt",e),console.log("search resilt all",e.allUsers);var t,a=e.user.address.coordinates;t=Object(N.a)(e.allUsers).filter((function(t){var n=t.address.coordinates;return U(a,n)<=3&&t.username!==e.user.username}));var n=Object(N.a)(t).sort((function(e,t){var n=U(a,e.address.coordinates),r=U(a,t.address.coordinates);return n<r?-1:n>r?1:0})),s=e.searchInput.trim();"Help"===e.select&&s&&(n=n.filter((function(e){return e.offerService.indexOf(s)>=0||e.offerStuff.indexOf(s)>=0}))),"Neighbors"===e.select&&s&&(n=n.filter((function(e){return e.username.toLowerCase().includes(s.toLowerCase())})));var l="",o="";console.log("1km",t);var c=Object(N.a)(n).map((function(e,t){e.offerService&&(console.log("HAHAH",!0===e.offerService),l=e.offerService.map((function(e){return console.log(typeof e),r.a.createElement(O.a,{key:t,xs:6,md:3},r.a.createElement("span",{className:"mr-2 help-item "},r.a.createElement("i",{className:"fas fa-icons"})),r.a.createElement("span",null,e))}))),e.offerStuff&&(o=e.offerStuff.map((function(e,t){return r.a.createElement(O.a,{key:t,xs:6,md:3},r.a.createElement("span",{className:"mr-2 toolbox"},r.a.createElement("i",{className:"fas fa-toolbox"})," "),r.a.createElement("span",null,e))})));var n=U(a,e.address.coordinates);return console.log(n),r.a.createElement(w.a,{key:t,className:"each-neighbor-card"},r.a.createElement("div",{className:"py-2 px-3"},r.a.createElement(p.b,{to:"/".concat(e.username),style:{textDecoration:"none",color:"black"}},r.a.createElement(S.a,null,r.a.createElement(O.a,{xs:12,md:4},r.a.createElement("img",{src:e.imageUrl,width:"150",className:"user-pic"}),r.a.createElement("h6",null,n," km"),r.a.createElement("h6",null,"Credit: ",e.credits)),r.a.createElement(O.a,{xs:12,md:8},r.a.createElement("h3",null,e.username),o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",{className:"mt-4",style:{color:"grey"}},"I can lend:")," ",r.a.createElement(S.a,null,o)),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",{className:"mt-4",style:{color:"grey"}},"I can help:"," "),r.a.createElement(S.a,null,l)))))))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null,r.a.createElement("h1",{className:"search-result-heading"},"Neighbors around you ( within 3 km )")),c.length>0?r.a.createElement("div",{className:"neighbor-card"},c):r.a.createElement(r.a.Fragment,null," ",r.a.createElement(O.a,{md:{offset:1}},r.a.createElement("h3",{className:"search-result-heading"},"No Result"))))},W=function(e){console.log("propsNav",e.user._id);var t="";e.chatMsg.length&&(t=Object(N.a)(e.chatMsg).filter((function(t){return t.sender._id===e.user._id||t.reciever._id===e.user._id})));var a={},n=[];Object(N.a)(t).forEach((function(t){t.sender._id!==e.user._id?(a[t.sender.username]={neighborId:t.sender._id,sender:t.sender._id,msg:t.chatMsg,timeStamp:t.createdAt,imageUrl:t.sender.imageUrl},n.push(t.sender.username)):(a[t.reciever.username]={neighborId:t.reciever._id,sender:t.sender._id,msg:t.chatMsg,timeStamp:t.createdAt,imageUrl:t.reciever.imageUrl},n.push(t.reciever.username))}));var s={1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},l=new Set(n.reverse());console.log(l);var o=Array.from(l);return o=o.map((function(t,n){var l=new Date(a[t].timeStamp),o=l.getDate(),c=l.getMonth(),i=s[c+1],u=a[t].msg.slice(0,25);return r.a.createElement(p.c,{key:n,to:"/messenger/".concat(a[t].neighborId),style:{textDecoration:"none",color:"black"},className:" message-selector"},r.a.createElement("div",{className:"flex-display-container px-2 py-3"},r.a.createElement("div",{className:"pr-2"},r.a.createElement("img",{src:a[t].imageUrl,alt:"chat-neighbor-pic",width:"50",className:"user-pic"})),r.a.createElement("div",null,r.a.createElement("div",{className:"m-0"},r.a.createElement("strong",null,t)," ",r.a.createElement("span",{style:{color:"grey"}},"\u2022 ".concat(o," ").concat(i," \u2022"))),r.a.createElement("div",{className:"m-0"},a[t].sender===e.user._id?r.a.createElement("span",null,"You: "):r.a.createElement(r.a.Fragment,null),r.a.createElement("span",{style:{color:"grey"}},u)))))})),r.a.createElement("span",null,o)},B=function(e){console.log("CHAT AREA",e),console.log("params",e.match.params.neighborId);var t=e.match.params.neighborId;console.log("current user",e.user._id),console.log("chatMsg////////",e.chatMsg);var a="";e.chatMsg.length&&(a=Object(N.a)(e.chatMsg).reverse().filter((function(a){return a.sender._id===e.user._id&&a.reciever._id===t||a.reciever._id===e.user._id&&a.sender._id===t})));var s=Object(N.a)(a).map((function(t,a){var n=t.chatMsg.trim().split("\n").map((function(e,t){return r.a.createElement("span",{key:t},e,r.a.createElement("br",null))}));return t.sender._id!==e.user._id?r.a.createElement("div",{key:a,className:"d-flex justify-content-start"},r.a.createElement("div",{className:"chat-bubble"},r.a.createElement("b",{style:{color:"#66AD93"}},t.sender.username),r.a.createElement("p",null,n))):r.a.createElement("div",{key:a,className:"d-flex justify-content-end "},r.a.createElement("div",{className:"chat-bubble"},r.a.createElement("b",{style:{color:"#FF8C00"}},"You"),r.a.createElement("p",null,n)))})),l="",o="";if(a[0])a[0].sender.username!==e.user.username?(l=a[0].sender.username,o=a[0].sender.imageUrl):(l=a[0].reciever.username,o=a[0].reciever.imageUrl);else if(a){var c=Object(N.a)(e.allUsers).filter((function(e){return e._id===t}));console.log(c),console.log(c[0].username),console.log(c[0].imageUrl),l=c[0].username,o=c[0].imageUrl}return console.log("chatAreaMsg",a),r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"col-9 p-0"},r.a.createElement("div",{className:"flex-display-container  px-2 py-2",style:{backgroundColor:"#D5F2E3"}},r.a.createElement("img",{src:o,width:"40",height:"40",className:"user-pic"}),r.a.createElement("h3",{className:"px-2"},l)),r.a.createElement("div",{className:"p-4 chat-area-msg-display"},s),r.a.createElement("div",null,r.a.createElement(b.a,{onSubmit:function(a){e.handleChatInputSubmit(a,t)}},r.a.createElement(b.a.Control,{as:"textarea",rows:"3",name:"chatInput",onChange:e.handleChange,value:e.chatInput,placeholder:"Text here..."}),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement(C.a,{className:"mx-2",type:"submit",variant:"outline-success"},"Send"))))))},Y=(a(107),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){console.log("props",this.props)}},{key:"render",value:function(){return r.a.createElement(w.a,{fluid:!0},r.a.createElement(S.a,null,r.a.createElement("div",{className:"col-3 pr-0"},r.a.createElement("h2",null,"Messenger"),r.a.createElement("div",{className:"p-0",style:{maxHeight:"76vh",overflow:"scroll",minHeight:"76vh"}},r.a.createElement(W,{user:this.props.user,chatMsg:this.props.chatMsg}))),r.a.createElement(B,Object.assign({user:this.props.user,chatMsg:this.props.chatMsg,chatInput:this.props.chatInput,handleChange:this.props.handleChange,handleChatInputSubmit:this.props.handleChatInputSubmit,allUsers:this.props.allUsers},this.props))))}}]),t}(n.Component)),z=a(145),K=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",street:"",houseNumber:"",city:"",postalCode:"",password:"",error:""},a.handleChange=function(e){a.setState(Object(o.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),E(a.state.username.replace(/\s/g,""),a.state.street,a.state.houseNumber,a.state.city,a.state.postalCode,a.state.password).then((function(e){e.message?a.setState({error:e.message}):(console.log(e),a.props.setUser(e),a.props.history.push("/"))}))},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"background-image"},r.a.createElement("div",{className:"signup"},r.a.createElement(w.a,null,r.a.createElement("h2",null,"Signup"),r.a.createElement(b.a,{onSubmit:this.handleSubmit},r.a.createElement(S.a,null,r.a.createElement(b.a.Group,{className:"col-6"},r.a.createElement(b.a.Label,{htmlFor:"username"},"Username: "),r.a.createElement(b.a.Control,{type:"text",name:"username",id:"username",value:this.state.username,onChange:this.handleChange})),r.a.createElement(b.a.Group,{className:"col-6"},r.a.createElement(b.a.Label,{htmlFor:"password"},"Password: "),r.a.createElement(b.a.Control,{type:"password",name:"password",id:"password",placeholder:"min. 8 characters",value:this.state.password,onChange:this.handleChange}))),r.a.createElement(S.a,null,r.a.createElement(b.a.Group,{className:"col-8 "},r.a.createElement(b.a.Label,{htmlFor:"street"},"Street: "),r.a.createElement(b.a.Control,{type:"text",name:"street",id:"street",value:this.state.street,onChange:this.handleChange,required:!0})),r.a.createElement(b.a.Group,{className:"col-4 "},r.a.createElement(b.a.Label,{htmlFor:"houseNumber"},"Nr.: "),r.a.createElement(b.a.Control,{type:"number",name:"houseNumber",id:"houseNumber",onChange:this.handleChange,value:this.state.houseNumber,required:!0}))),r.a.createElement(S.a,null,r.a.createElement(b.a.Group,{className:"col-6"},r.a.createElement(b.a.Label,{htmlFor:"postalCode",id:"postal-code"},"Postalcode:"," "),r.a.createElement(b.a.Control,{type:"number",name:"postalCode",id:"postalCode",onChange:this.handleChange,value:this.state.postalCode,required:!0})),r.a.createElement(b.a.Group,{className:"col-6"},r.a.createElement(b.a.Label,{htmlFor:"city"},"City: "),r.a.createElement(b.a.Control,{type:"text",name:"city",id:"city",onChange:this.handleChange,value:this.state.city,required:!0}))),this.state.error&&r.a.createElement(z.a,{variant:"danger"},this.state.error),r.a.createElement(C.a,{variant:"danger",type:"submit"},"Sign up")))))}}]),t}(n.Component),Q=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",error:""},a.handleChange=function(e){a.setState(Object(o.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),v(a.state.username,a.state.password).then((function(e){e.message?a.setState({error:e.message}):(a.props.setUser(e),a.props.history.push("/"))}))},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"background-image"},r.a.createElement("div",{className:"login-form"},r.a.createElement("h2",null,"Login"),r.a.createElement(b.a,{onSubmit:this.handleSubmit},r.a.createElement(b.a.Group,null,r.a.createElement(b.a.Label,{htmlFor:"username"},"Username: "),r.a.createElement(b.a.Control,{type:"text",name:"username",id:"username",value:this.state.username,onChange:this.handleChange})),r.a.createElement(b.a.Group,null,r.a.createElement(b.a.Label,{htmlFor:"password"},"Password: "),r.a.createElement(b.a.Control,{type:"password",name:"password",id:"password",value:this.state.password,onChange:this.handleChange})),this.state.error&&r.a.createElement(z.a,{variant:"danger"},this.state.error),r.a.createElement(C.a,{variant:"danger",type:"submit"},"Log in"))))}}]),t}(n.Component),V=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",{className:"mt-5 mb-2",style:{color:"grey"}},"About Me","  ",this.props.sameUser&&!this.props.state.showAboutMeForm&&r.a.createElement(C.a,{onClick:function(){return e.props.toggleForm({showAboutMeForm:!e.props.state.showAboutMeForm})},variant:"outline-info"},"\u270e")),this.props.state.showAboutMeForm&&r.a.createElement(b.a,{onSubmit:this.props.updateAboutMe},r.a.createElement(b.a.Group,null,r.a.createElement(b.a.Control,{as:"textarea",rows:"3",name:"aboutMe",onChange:this.props.handleChange,value:this.props.state.aboutMe})),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement(C.a,{type:"submit",variant:"outline-success",className:"mr-1"},"Add"),r.a.createElement(C.a,{onClick:this.props.cancel,variant:"outline-danger"},"Cancel"))),!this.props.state.showAboutMeForm&&r.a.createElement("p",{className:"mt-3 mb-5"},this.props.state.aboutMe&&this.props.state.aboutMe.trim().split("\n").map((function(e,t){return r.a.createElement("span",{key:t},e,r.a.createElement("br",null))}))))}}]),t}(n.Component),Z=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"user-pic",src:this.props.imageUrl,alt:"",width:"300"}),this.props.sameUser&&r.a.createElement("form",{onSubmit:this.props.handleSubmitFile},r.a.createElement("input",{type:"file",id:"pic-input",onChange:this.props.handleFileUpload}),r.a.createElement(C.a,{type:"submit",variant:"outline-info"},"Upload")))}}]),t}(n.Component),$=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=r.a.createElement(r.a.Fragment,null);return this.props.offerService&&(t=Object(N.a)(this.props.offerService).map((function(t,a){return r.a.createElement(n.Fragment,{key:a},r.a.createElement(S.a,null,r.a.createElement(O.a,null,r.a.createElement("li",null," ",r.a.createElement("span",{className:"mr-2 help-item "},r.a.createElement("i",{className:"fas fa-icons"})),r.a.createElement("span",null,t))),e.props.showOfferServiceForm&&r.a.createElement(O.a,null,r.a.createElement("button",{onClick:function(){return e.props.deleteService(t)}},"\xd7"))))}))),r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"mt-5"},"I can help..."," ",this.props.sameUser&&!this.props.showOfferServiceForm&&r.a.createElement(C.a,{onClick:function(){return e.props.toggleForm({showOfferServiceForm:!e.props.showOfferServiceForm})},variant:"outline-info"},"\u270e"," Edit")),r.a.createElement("ul",{style:{listStyle:"none"}},t),this.props.showOfferServiceForm&&r.a.createElement(b.a,{onSubmit:this.props.handleSubmitOfferService},r.a.createElement(b.a.Group,null,r.a.createElement(b.a.Control,{id:"help-input",type:"text",name:"serviceInput",onChange:this.props.handleChange,value:this.props.serviceInput})),r.a.createElement("div",{className:"add-service-stuff-btn"},r.a.createElement(C.a,{type:"submit",variant:"outline-success",className:"mr-2"},"Add"),r.a.createElement(C.a,{onClick:function(){return e.props.toggleForm({showOfferServiceForm:!e.props.showOfferServiceForm})},variant:"outline-info"},"Done"))))}}]),t}(n.Component),X=function(e){var t=r.a.createElement(r.a.Fragment,null);return e.offerStuff&&(t=Object(N.a)(e.offerStuff).map((function(t,a){return r.a.createElement(n.Fragment,{key:a},r.a.createElement(S.a,null,r.a.createElement(O.a,null,r.a.createElement("li",null,r.a.createElement("span",{className:"mr-2 toolbox"},r.a.createElement("i",{className:"fas fa-toolbox"})," ")," ",r.a.createElement("span",null,t))),e.showOfferStuffForm&&r.a.createElement(O.a,null,r.a.createElement("button",{onClick:function(){return e.deleteStuff(t)}},"\xd7"))))}))),r.a.createElement("div",{className:"mb-5"},r.a.createElement("h3",{className:"mt-5"},"I can lend..."," ",e.sameUser&&!e.showOfferStuffForm&&r.a.createElement(C.a,{onClick:function(){return e.toggleForm({showOfferStuffForm:!e.showOfferStuffForm})},variant:"outline-info"},"\u270e"," Edit")),r.a.createElement("ul",{style:{listStyle:"none"}},t),e.showOfferStuffForm&&r.a.createElement(b.a,{onSubmit:e.handleSubmitOfferStuff},r.a.createElement(b.a.Group,null,r.a.createElement(b.a.Control,{type:"text",name:"stuffInput",id:"stuff-input",onChange:e.handleChange,value:e.stuffInput})),r.a.createElement("div",{className:"add-service-stuff-btn"},r.a.createElement(C.a,{type:"submit",variant:"outline-success",className:"mr-2"},"Add"),r.a.createElement(C.a,{onClick:function(){return e.toggleForm({showOfferStuffForm:!e.showOfferStuffForm})},variant:"outline-info"},"Done"))))},ee=a(72),te=a.n(ee),ae=function(e){return console.log("Ref Card",e.reference),Object(N.a)(e.reference).map((function(e,t){var a=e.content.split("\n").map((function(e,t){return r.a.createElement("span",{key:t},e,r.a.createElement("br",null))})),s="\u2605".repeat(e.rating);return r.a.createElement(n.Fragment,{key:t},r.a.createElement(S.a,{className:"my-3"},r.a.createElement(O.a,{className:"mr-2",xs:2,lg:1},e.author.imageUrl&&r.a.createElement("img",{className:"user-pic mt-1",src:e.author.imageUrl,alt:"auth picture",width:"40"})),r.a.createElement(O.a,null,e.author.username?r.a.createElement(p.b,{style:{textDecoration:"none",color:"black"},to:"/".concat(e.author.username)},r.a.createElement("strong",null,e.author.username)):r.a.createElement("strong",{style:{color:"grey",fontStyle:"italic"}},"Deleted"),r.a.createElement("p",{className:"mb-1",style:{color:"#ffcc00",fontSize:20}},s),r.a.createElement("p",null,a))))}))},ne=0,re=function(e){console.log("In ratingchanged Function",e),ne=e},se=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"mt-5"},"Reference"," ",!e.sameUser&&!e.showReferenceForm&&e.user&&r.a.createElement(C.a,{onClick:function(){return e.toggleForm({showReferenceForm:!e.showReferenceForm})},variant:"outline-info"},"\u270e"," Add a reference")),r.a.createElement(w.a,null,e.showReferenceForm&&!e.sameUser&&r.a.createElement(n.Fragment,null,e.showNotEnoughCredit&&r.a.createElement(z.a,{variant:"warning"},"Your credit: ",e.authorCredits,r.a.createElement("br",null),"You don't have enough credit to transfer."),e.showNeedtoWriteSth&&r.a.createElement(z.a,{variant:"warning"},"You need to write something."),r.a.createElement(S.a,{className:"my-3"},r.a.createElement(O.a,{className:"mr-2",xs:2,lg:1},r.a.createElement("img",{className:"user-pic mt-1",src:e.user.imageUrl,alt:"auth picture",width:"40"})),r.a.createElement(O.a,null,r.a.createElement(b.a,null,e.showReferenceAlert&&r.a.createElement(z.a,{variant:"danger"},"IMPORTANT!!",r.a.createElement("br",null),"Are you sure you want to submit this reference?",r.a.createElement("br",null),"Submitted reference CANNOT be modified or deleted.",r.a.createElement("br",null),r.a.createElement(C.a,{onClick:function(){return e.addReference(ne)},variant:"outline-success",className:"mt-3"},"Confirm"),r.a.createElement(C.a,{onClick:function(){return e.toggleForm({showReferenceAlert:!1})},variant:"outline-danger",className:"mt-3 mx-2"},"Cancel")),r.a.createElement(S.a,null,r.a.createElement(O.a,{md:6},r.a.createElement(b.a.Group,null,r.a.createElement(b.a.Label,null,"Give Credits to ",r.a.createElement("strong",null,e.profileOwner)," ","(optional) :"),r.a.createElement(b.a.Control,{type:"number",name:"creditInput",placeholder:"Write a number",onChange:e.handleCreditChange,value:e.creditInput}))),r.a.createElement(O.a,{md:1}),r.a.createElement(O.a,{md:5},r.a.createElement(b.a.Label,null,"Rating :"),r.a.createElement(te.a,{value:e.rating,count:5,onChange:re,size:30,half:!1,color2:"#ffd700"}))),r.a.createElement(b.a.Group,null,r.a.createElement(b.a.Control,{as:"textarea",rows:"3",name:"referenceInput",onChange:e.handleRefChange,value:e.referenceInput,placeholder:"Write your reference here"})),!e.showReferenceAlert&&r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement(C.a,{onClick:function(){return e.firstAddRef(ne)},variant:"outline-success"},"Add"),r.a.createElement(C.a,{onClick:e.cancelReferenceChange,variant:"outline-danger",className:"mx-2"},"Cancel")))))),r.a.createElement(ae,{reference:e.reference})))},le=(n.Component,function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={_id:null,username:"",address:"",street:"",houseNumber:"",city:"",postalCode:"",offerStuff:"",offerService:"",imageUrl:"",aboutMe:"",reference:"",credits:"",event:"",following:"",showAboutMeForm:!1,showAddressForm:!1,showOfferServiceForm:!1,showOfferStuffForm:!1,showReferenceForm:!1,showReferenceAlert:!1,serviceInput:"",stuffInput:"",referenceInput:"",creditInput:"",authorCredits:a.props.user.credits,rating:0,showDeleteAlert:!1,photoMessage:null,showNotEnoughCredit:!1,showNeedtoWriteSth:!1},a.getData=function(){var e=a.props.match.params.username;g.a.get("/api/user/".concat(e)).then((function(e){console.log("getData",e),a.setState({_id:e.data._id,username:e.data.username,address:e.data.address,street:e.data.address.street,houseNumber:e.data.address.houseNumber,city:e.data.address.city,postalCode:e.data.address.postalCode,offerStuff:e.data.offerStuff,offerService:e.data.offerService,imageUrl:e.data.imageUrl,aboutMe:e.data.aboutMe,reference:e.data.reference.reverse(),credits:e.data.credits,event:e.data.event,following:e.data.following,photoMessage:null})})).catch((function(e){console.log(e),404===e.response.status&&a.setState({error:e.response.data.message})}))},a.handleChange=function(e){a.setState(Object(o.a)({},e.target.name,e.target.value))},a.handleCreditChange=function(e){var t;a.setState((t={},Object(o.a)(t,e.target.name,e.target.value),Object(o.a)(t,"showNotEnoughCredit",!1),t))},a.handleRefChange=function(e){var t;a.setState((t={},Object(o.a)(t,e.target.name,e.target.value),Object(o.a)(t,"showNeedtoWriteSth",!1),t))},a.toggleForm=function(e){a.setState(e)},a.updateAddress=function(e){e.preventDefault(),g.a.put("/api/user/address/".concat(a.state.username),{street:a.state.street,houseNumber:a.state.houseNumber,city:a.state.city,postalCode:a.state.postalCode}).then((function(e){a.setState({address:e.data.address,street:e.data.address.street,houseNumber:e.data.address.houseNumber,city:e.data.address.city,postalCode:e.data.address.postalCode},(function(){a.getData(),a.toggleForm({showAddressForm:!a.state.showAddressForm})}))})).catch((function(e){return console.log(e)}))},a.updateAboutMe=function(e){e.preventDefault(),g.a.put("/api/user/".concat(a.state.username),{aboutMe:a.state.aboutMe}).then((function(e){a.setState({aboutMe:e.data.aboutMe},(function(){a.getData(),a.toggleForm({showAboutMeForm:!a.state.showAboutMeForm})}))})).catch((function(e){return console.log(e)}))},a.cancel=function(){a.getData(),a.toggleForm({showAboutMeForm:!a.state.showAboutMeForm})},a.handleFileUpload=function(e){console.log("The file to be uploaded is: ",e.target.files[0]);var t=new FormData;t.append("imageUrl",e.target.files[0]),a.setState({uploadOn:!0}),_(t).then((function(e){a.setState({imageUrl:e.secure_url,uploadOn:!1})})).catch((function(e){console.log("Error while uploading the file: ",e)}))},a.handleSubmitFile=function(e){e.preventDefault(),a.state.uploadOn||g.a.put("/api/user/profile-pic/".concat(a.state.username),{imageUrl:a.state.imageUrl}).then((function(e){a.setState({imageUrl:e.data.imageUrl,photoMessage:"Image has been updated successfully"},(function(){a.getData()}))})).catch((function(e){return console.log(e)}))},a.handleSubmitOfferService=function(e){e.preventDefault(),""!==a.state.serviceInput&&g.a.put("/api/user/offer-service/".concat(a.state.username),{offerService:a.state.serviceInput}).then((function(e){a.setState({offerService:e.data.offerService,serviceInput:""},(function(){a.getData()}))})).catch((function(e){return console.log(e)}))},a.deleteService=function(e){g.a.put("/api/user/offer-service-delete/".concat(a.state.username),{offerService:e}).then((function(e){a.setState({offerService:e.data.OfferService},(function(){a.getData()}))})).catch((function(e){return console.log(e)}))},a.handleSubmitOfferStuff=function(e){e.preventDefault(),a.state.stuffInput&&g.a.put("/api/user/offer-stuff/".concat(a.state.username),{offerStuff:a.state.stuffInput}).then((function(e){a.setState({offerStuff:e.data.offerStuff,stuffInput:""},(function(){a.getData()}))})).catch((function(e){return console.log(e)}))},a.deleteStuff=function(e){g.a.put("/api/user/offer-stuff-delete/".concat(a.state.username),{offerStuff:e}).then((function(e){a.setState({offerStuff:e.data.offerStuff},(function(){a.getData()}))})).catch((function(e){return console.log(e)}))},a.firstAddRef=function(e){if(!(a.state.creditInput<0))if(parseInt(a.state.authorCredits,10)-parseInt(a.state.creditInput,10)<0)a.setState({showNotEnoughCredit:!0});else if(a.state.referenceInput){console.log("hit firstAddRef, params Stars= ",e);console.log("type of stars",typeof e),a.toggleForm({showReferenceAlert:!0}),a.setState({rating:e}),console.log("In firstAddRef after setState",a.state.rating)}else a.setState({showNeedtoWriteSth:!0})},a.cancelReferenceChange=function(){a.getData(),a.toggleForm({showReferenceAlert:!1,showReferenceForm:!1}),a.setState({rating:0,referenceInput:"",creditInput:"",showNotEnoughCredit:!1,showNeedtoWriteSth:!1})},a.axiosCreateRef=function(){g.a.post("api/reference",{content:a.state.referenceInput,author:a.props.user._id,rating:a.state.rating,profileOwner:a.state._id}).then((function(e){a.setState({referenceInput:""}),console.log("1",e),a.getData()})).catch((function(e){return console.log(e)}))},a.axiosUpdateAuthorCredits=function(){g.a.put("api/reference/credits/author",{author:a.props.user._id,authorCredits:parseInt(a.state.authorCredits,10)-parseInt(a.state.creditInput,10)}).then((function(e){console.log(2,e),a.setState({creditInput:"",rating:0}),a.getData()})).catch((function(e){return console.log(e)}))},a.axiosUpdateProfileOwnerCredits=function(){g.a.put("api/reference/credits/profile-owner",{username:a.state.username,credits:parseInt(a.state.credits,10)+parseInt(a.state.creditInput,10)}).then((function(e){console.log("3",e),a.getData()})).catch((function(e){return console.log(e)}))},a.addReference=function(e){a.setState({rating:e}),console.log("ABCD",a.state.rating),a.axiosCreateRef(),a.axiosUpdateAuthorCredits(),a.axiosUpdateProfileOwnerCredits(),a.setState({showReferenceAlert:!1})},a.deleteAccount=function(){console.log("ABCDE"),g.a.delete("/api/user/".concat(a.state._id),{id:a.state._id}).then((function(e){a.props.history.push("/")})).catch((function(e){return console.log(e)}))},a.toggleAlertFunction=function(){a.setState({showDeleteAlert:!a.state.showDeleteAlert})},a.cancelAddressChange=function(){a.setState({showAddressForm:!1})},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){console.log("helooooooooooooo"),this.getData()}},{key:"render",value:function(){var e=this,t=(r.a.createElement("p",null,"IMPORTANT!! ",r.a.createElement("br",null),"Are you sure you want to delete your account??"),!1);return this.state._id===this.props.user._id&&(t=!0),this.state.error?r.a.createElement("div",null,r.a.createElement("p",null,this.state.error)):r.a.createElement(w.a,{className:"my-5 px-5"},r.a.createElement(S.a,null,r.a.createElement(O.a,{md:6,className:"my-5"},r.a.createElement(Z,{user:this.props.user,sameUser:t,imageUrl:this.state.imageUrl,handleFileUpload:this.handleFileUpload,handleSubmitFile:this.handleSubmitFile,photoMessage:this.state.photoMessage}),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",{style:{color:"grey"},className:"mt-4"},"Address ","  ",!this.state.showAddressForm&&r.a.createElement(C.a,{onClick:function(){return e.toggleForm({showAddressForm:!e.state.showAddressForm})},variant:"outline-info"},"\u270e")),this.state.showAddressForm&&r.a.createElement(b.a,{onSubmit:this.updateAddress},r.a.createElement(S.a,null,r.a.createElement(b.a.Group,{className:"col-8 col-sm-4"},r.a.createElement(b.a.Label,{htmlFor:"street"},"Street: "),r.a.createElement(b.a.Control,{type:"text",name:"street",id:"street",value:this.state.street,onChange:this.handleChange,required:!0})),r.a.createElement(b.a.Group,{className:"col-5 col-sm-2"},r.a.createElement(b.a.Label,{htmlFor:"houseNumber"},"Nr.: "),r.a.createElement(b.a.Control,{type:"number",name:"houseNumber",id:"houseNumber",onChange:this.handleChange,value:this.state.houseNumber,required:!0}))),r.a.createElement(S.a,null,r.a.createElement(b.a.Group,{className:"col-3"},r.a.createElement(b.a.Label,{htmlFor:"postalCode"},"Postalcode:"," "),r.a.createElement(b.a.Control,{type:"number",name:"postalCode",id:"postalCode",onChange:this.handleChange,value:this.state.postalCode,required:!0})),r.a.createElement(b.a.Group,{className:"col-3"},r.a.createElement(b.a.Label,{htmlFor:"city"},"City: "),r.a.createElement(b.a.Control,{type:"text",name:"city",id:"city",onChange:this.handleChange,value:this.state.city,required:!0}))),this.state.error&&r.a.createElement(z.a,{variant:"danger"},this.state.error),r.a.createElement(C.a,{variant:"outline-success",type:"submit",className:"mr-2"},"Save"),r.a.createElement(C.a,{variant:"outline-danger",onClick:this.cancelAddressChange},"Cancel")),!this.state.showAddressForm&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"mb-0"},this.state.address.formattedAddress),r.a.createElement("p",{style:{color:"grey",fontStyle:"italic"}},"* Only you can see your address"))),r.a.createElement("h5",{className:"mt-4",style:{color:"grey"}},"Credit:"," ",r.a.createElement("span",{style:{color:"black"}},this.state.credits))),r.a.createElement(O.a,{md:6,className:"my-5"},r.a.createElement("h1",null,this.state.username,"  ",!t&&this.props.user&&r.a.createElement(p.b,{to:"/messenger/".concat(this.state._id),className:"btn btn-outline-info"},"\u2709"," Message me")),r.a.createElement(V,{sameUser:t,user:this.props.user,state:this.state,toggleForm:this.toggleForm,handleChange:this.handleChange,cancel:this.cancel,updateAboutMe:this.updateAboutMe})),r.a.createElement(O.a,{md:5},r.a.createElement(X,{sameUser:t,offerStuff:this.state.offerStuff,showOfferStuffForm:this.state.showOfferStuffForm,toggleForm:this.toggleForm,handleChange:this.handleChange,stuffInput:this.state.stuffInput,handleSubmitOfferStuff:this.handleSubmitOfferStuff,deleteStuff:this.deleteStuff}),r.a.createElement("p",{className:"mt-5"}),r.a.createElement($,{sameUser:t,offerService:this.state.offerService,showOfferServiceForm:this.state.showOfferServiceForm,toggleForm:this.toggleForm,handleChange:this.handleChange,serviceInput:this.state.serviceInput,handleSubmitOfferService:this.handleSubmitOfferService,deleteService:this.deleteService})),r.a.createElement(O.a,{md:7},r.a.createElement(se,{sameUser:t,user:this.props.user,toggleForm:this.toggleForm,handleChange:this.handleChange,cancelReferenceChange:this.cancelReferenceChange,firstAddRef:this.firstAddRef,addReference:this.addReference,showReferenceForm:this.state.showReferenceForm,showReferenceAlert:this.state.showReferenceAlert,rating:this.state.rating,referenceInput:this.state.referenceInput,creditInput:this.state.creditInput,reference:this.state.reference,showNotEnoughCredit:this.state.showNotEnoughCredit,showNeedtoWriteSth:this.state.showNeedtoWriteSth,authorCredits:this.state.authorCredits,profileOwner:this.state.username,handleRefChange:this.handleRefChange,handleCreditChange:this.handleCreditChange}))))}}]),t}(n.Component)),oe=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",null,r.a.createElement("p",null,"\u24b8"," 2019 \xa0",r.a.createElement("a",{className:"footer-link",rel:"noopener noreferrer",href:"https://www.linkedin.com/in/johanna-geissler/",target:"_blank"},r.a.createElement("i",{className:"fab fa-linkedin"})," Hanna Gei\xdfler"),"\xa0 & \xa0"," ",r.a.createElement("a",{className:"footer-link",rel:"noopener noreferrer",href:"https://www.linkedin.com/in/shanwong29/",target:"_blank"},r.a.createElement("i",{className:"fab fa-linkedin"})," Kam Shan Wong")),r.a.createElement("p",null,"Full code in our \xa0"," ",r.a.createElement("a",{className:"footer-link",rel:"noopener noreferrer",href:"https://github.com/shanwong29/Kiez",target:"_blank"},r.a.createElement("i",{className:"fab fa-github"})," Github Repository")))}}]),t}(n.Component),ce=a(73),ie=a.n(ce),ue=Object({NODE_ENV:"production",PUBLIC_URL:""}).PORT,me=ie()(ue),he=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={user:a.props.user,allUsers:[],allEvents:[],select:"",searchInput:"",selectInputfield:"",searchInputfield:"",showNewsfeed:!0,showMyEvents:!1,showEventsGoing:!1,showNextEvents:!1,sender:a.props.user._id,reciever:"",chatMsg:[],chatInput:"",recieverAction:""},a.handleChangeNav=function(e){a.setState(e),a.getAllUser(),a.getAllEvents()},a.setUser=function(e){a.setState({user:e})},a.handleChange=function(e){a.setState(Object(o.a)({},e.target.name,e.target.value))},a.getAllUser=function(){g.a.get("/api/user").then((function(e){a.setState({allUsers:e.data}),console.log(e)})).catch((function(e){console.log(e)}))},a.getAllEvents=function(){g.a.get("/api/events/myevents").then((function(e){a.setState({allEvents:e.data})})).catch((function(e){console.log(e)}))},a.getMsg=function(){g.a.get("/api/chat/chat-msg").then((function(e){a.setState({chatMsg:e.data,chatInput:""},(function(){return console.log("our chat array/////",a.state.chatMsg)}))})).catch((function(e){console.log(e)}))},a.handleChatInputSubmit=function(e,t){e.preventDefault(),a.state.chatInput&&g.a.post("/api/chat/chat-msg",{chatMsg:a.state.chatInput,reciever:t}).then((function(e){me.send(e.data),a.getMsg()})).catch((function(e){return console.log(e)}))},a.handleQuery=function(e,t){e.preventDefault(),a.state.selectInputfield&&(a.getAllUser(),a.setState({searchInput:a.state.searchInputfield,select:a.state.selectInputfield}),t&&(console.log(t),t.push("/search-result")))},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getAllUser(),this.getAllEvents(),this.getMsg(),me.on("message",(function(t){console.log("socket received emitted msg:",t),e.getMsg()}))}},{key:"render",value:function(){var e=this;return console.log("USER-INFO:",this.state.user),r.a.createElement("div",{className:"App"},r.a.createElement(d.b,{render:function(t){return console.log(t),r.a.createElement(y,{user:e.state.user,clearUser:e.setUser,select:e.state.select,searchInput:e.state.searchInput,selectInputfield:e.state.selectInputfield,searchInputfield:e.state.searchInputfield,handleChange:e.handleChange,handleQuery:e.handleQuery,getAllUser:e.getAllUser,history:t.history,handleChangeNav:e.handleChangeNav,showNewsfeed:e.state.showNewsfeed,showMyEvents:e.state.showMyEvents,showEventsGoing:e.state.showEventsGoing,showNextEvents:e.state.showNextEvents})}}),r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",render:function(t){var a;return e.state.user?r.a.createElement(D,Object.assign({},t,(a={user:e.state.user,getAllEvents:e.getAllEvents,allEvents:e.state.allEvents,state:e.state},Object(o.a)(a,"allEvents",e.state.allEvents),Object(o.a)(a,"showNewsfeed",e.state.showNewsfeed),Object(o.a)(a,"showMyEvents",e.state.showMyEvents),Object(o.a)(a,"showEventsGoing",e.state.showEventsGoing),Object(o.a)(a,"showNextEvents",e.state.showNextEvents),Object(o.a)(a,"handleChangeNav",e.handleChangeNav),Object(o.a)(a,"chatMsg",e.state.chatMsg),a))):r.a.createElement(d.a,{to:"/signup"})}}),r.a.createElement(d.b,{exact:!0,path:"/search-result",render:function(t){return r.a.createElement(H,Object.assign({},t,{user:e.state.user,allUsers:e.state.allUsers,select:e.state.select,searchInput:e.state.searchInput}))}}),r.a.createElement(d.b,{exact:!0,path:"/messenger/:neighborId",render:function(t){return r.a.createElement(Y,Object.assign({},t,{allUsers:e.state.allUsers,user:e.state.user,chatMsg:e.state.chatMsg,chatInput:e.state.chatInput,handleChange:e.handleChange,handleChatInputSubmit:e.handleChatInputSubmit,getMsg:e.getMsg,setRecieverAction:e.setRecieverAction}))}}),r.a.createElement(d.b,{exact:!0,path:"/signup",render:function(t){return r.a.createElement(K,Object.assign({},t,{setUser:e.setUser}))}}),r.a.createElement(d.b,{exact:!0,path:"/login",render:function(t){return r.a.createElement(Q,Object.assign({},t,{setUser:e.setUser}))}}),r.a.createElement(d.b,{exact:!0,path:"/:username",render:function(t){return r.a.createElement(le,Object.assign({},t,{user:e.state.user,allUsers:e.state.allUsers}))}}),r.a.createElement(d.b,{exact:!0,path:"/events/create",render:function(t){return r.a.createElement(G,Object.assign({},t,{getAllEvents:e.getAllEvents}))}}),r.a.createElement(d.b,{exact:!0,path:"/events/:id",render:function(t){return r.a.createElement(q,Object.assign({},t,{state:e.state,user:e.state.user,allUsers:e.state.allUsers,getAllEvents:e.getAllEvents}))}})),r.a.createElement(oe,null))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));g.a.get("/api/auth/loggedin").then((function(e){var t=e.data;l.a.render(r.a.createElement(p.a,null,r.a.createElement(he,{user:t})),document.getElementById("root"))})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},77:function(e,t,a){e.exports=a(139)},82:function(e,t,a){},83:function(e,t,a){}},[[77,1,2]]]);
//# sourceMappingURL=main.5adfc2a8.chunk.js.map